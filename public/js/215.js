"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[215],{70215:(e,r,t)=>{t.r(r),t.d(r,{default:()=>H});var o=t(58222),n={key:0,class:"text-sm text-gray-500 mb-5"},a={class:"text-blue-500 font-bold"},l=(0,o.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[(0,o.createElementVNode)("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),i=(0,o.createElementVNode)("span",null,"Create Header",-1),s={key:1,name:"trigger",xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2 cursor-pointer hover:text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},c=[(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"},null,-1)],u={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2 cursor-pointer hover:text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},d=[(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},null,-1)];var m=t(96486),h=t.n(m),f=t(87879),p=t(66222),v=t(75802),y=t(91098),b=t(55092),g=t(539);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function x(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function k(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?x(Object(t),!0).forEach((function(r){C(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function C(e,r,t){return(r=function(e){var r=function(e,r){if("object"!==w(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,r||"default");if("object"!==w(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"===w(r)?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const V={components:{useForm:f.cI,DefaultInput:p.Z,DefaultModal:v.Z,PrimaryButton:b.Z,TextOrCodeEditor:g.Z},props:{headers:{type:Array},header:{type:Object,default:null},index:{type:Number,default:null},mode:{type:String,default:null,validator:function(e){return["create","clone","update"].includes(e)}}},data:function(){return{form:null,localHeaders:this.headers,useVersionBuilder:(0,y.P)()}},watch:{headers:function(e,r){console.log("headers @stage 1"),this.localHeaders=e},localHeaders:function(e,r){console.log("headers @stage 2"),this.$emit("update:headers",e)}},computed:{modeInCaps:function(){return this.mode.charAt(0).toUpperCase()+this.mode.slice(1)}},methods:{resetForm:function(){"create"==this.mode?this.form=(0,f.cI)((0,y.P)().getBlankHeader()):"clone"==this.mode?this.form=(0,f.cI)((0,y.P)().getClonedHeader(this.header)):"update"==this.mode&&(this.form=(0,f.cI)(k(k({},(0,y.P)().getBlankHeader()),h().cloneDeep(this.header))))},createHeader:function(e){this.form.clearErrors();var r=this.useVersionBuilder.searchHeaders(this.localHeaders,this.form.name,!0).length;if(0==this.form.name.length?this.form.setError("name","The header name is required"):(0!=this.form.value.code_editor_mode||""!=this.form.value.text&&null!=this.form.value.text)&&(1!=this.form.value.code_editor_mode||""!=this.form.value.code_editor_text&&null!=this.form.value.code_editor_text)?(["create","clone"].includes(this.mode)&&r||"update"==this.mode&&r&&this.header.name!==this.form.name)&&this.form.setError("name","This header name is already in use"):this.form.setError("value","The value is required"),!1===this.form.hasErrors){var t=this.form.data();"update"==this.mode?this.useVersionBuilder.updateHeader(this.localHeaders,t,this.index):this.useVersionBuilder.addHeader(this.localHeaders,t);var o=this.mode+"d";this.$message({message:"Header "+o+" successfully",type:"success"}),e()}},cancelCreateHeader:function(){this.form.clearErrors()}}};const H=(0,t(83744).Z)(V,[["render",function(e,r,t,m,h,f){var p=(0,o.resolveComponent)("DefaultInput"),v=(0,o.resolveComponent)("TextOrCodeEditor"),y=(0,o.resolveComponent)("PrimaryButton"),b=(0,o.resolveComponent)("DefaultModal");return(0,o.openBlock)(),(0,o.createBlock)(b,{defaultText:"Cancel",onOpen:r[2]||(r[2]=function(e){return f.resetForm()}),onClose:r[3]||(r[3]=function(r){return e.$emit("close")}),primaryAction:f.createHeader,primaryText:f.modeInCaps+" Header",defaultAction:f.cancelCreateHeader},{title:(0,o.withCtx)((function(){return[(0,o.createTextVNode)((0,o.toDisplayString)(f.modeInCaps+" Header"),1)]})),trigger:(0,o.withCtx)((function(){return["create"==t.mode?((0,o.openBlock)(),(0,o.createBlock)(y,{key:0,name:"trigger",class:"px-3"},{default:(0,o.withCtx)((function(){return[l,i]})),_:1})):"clone"==t.mode?((0,o.openBlock)(),(0,o.createElementBlock)("svg",s,c)):"update"==t.mode?((0,o.openBlock)(),(0,o.createElementBlock)("svg",u,d)):(0,o.createCommentVNode)("",!0)]})),default:(0,o.withCtx)((function(){return["clone"==t.mode?((0,o.openBlock)(),(0,o.createElementBlock)("p",n,[(0,o.createTextVNode)("Cloning "),(0,o.createElementVNode)("span",a,(0,o.toDisplayString)(t.header.name),1),(0,o.createTextVNode)(" header")])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(p,{modelValue:h.form.name,"onUpdate:modelValue":r[0]||(r[0]=function(e){return h.form.name=e}),label:"Name",error:h.form.errors.name,class:"mb-6"},null,8,["modelValue","error"]),(0,o.createVNode)(v,{modelValue:h.form.value,"onUpdate:modelValue":r[1]||(r[1]=function(e){return h.form.value=e}),label:"Value",error:h.form.errors.value,class:"mb-4"},null,8,["modelValue","error"])]})),_:1},8,["primaryAction","primaryText","defaultAction"])}]])}}]);