"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7316,7839],{37839:(e,o,r)=>{r.r(o),r.d(o,{default:()=>S});var t=r(58222),n={key:0,class:"text-sm text-gray-500 mb-5"},s={class:"text-gray-800 font-bold"},a={key:1,class:"text-sm text-gray-500 mb-5"},l={class:"text-gray-800 font-bold"},i={key:2,class:"text-sm text-gray-500 mb-5"},c={class:"text-gray-800 font-bold"},d={key:0,class:"text-xs text-gray-400 ml-2"},m={key:0,class:"text-sm text-gray-500 border-b pb-5 mb-5"},u={class:"text-gray-800 font-bold"},p={key:3},f={class:"flex items-center justify-between mb-4"},h=(0,t.createElementVNode)("span",{class:"text-sm font-medium text-gray-900"},"Features",-1),v=(0,t.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[(0,t.createElementVNode)("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),g=(0,t.createElementVNode)("span",null,"Add Feature",-1),k=["onClick"],V=[(0,t.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)],w=(0,t.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mt-3 ml-4 hover:text-blue-500 cursor-grab active:cursor-grabbing draggble-handle",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,t.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1);var b=r(88496),y=r(90770),x=r(66222),B=r(53233),C=r(52241),E=r(71362),N=r(34223);const _={components:{draggable:b.J,PrimaryAlert:y.Z,DefaultInput:x.Z,DefaultSelect:B.Z,DefaultButton:C.Z,DefaultSwitch:E.Z,DefaultTextArea:N.Z},props:{form:Object,mode:String,version:{type:Object,default:null}},methods:{addFeature:function(){this.form.features.push("")},removeFeature:function(e){this.form.features.splice(e,1),this.$message({message:"Feature removed",type:"success"})}},computed:{versionOptions:function(){var e=this.$page.props.versionsPayload;return e.length&&(e=e.map((function(e){return{label:e.number,value:e.id}}))),e.unshift({label:"None",value:"none"}),e}}};const S=(0,r(83744).Z)(_,[["render",function(e,o,r,b,y,x){var B=(0,t.resolveComponent)("DefaultInput"),C=(0,t.resolveComponent)("DefaultTextArea"),E=(0,t.resolveComponent)("DefaultSwitch"),N=(0,t.resolveComponent)("DefaultButton"),_=(0,t.resolveComponent)("draggable"),S=(0,t.resolveComponent)("PrimaryAlert"),D=(0,t.resolveComponent)("DefaultSelect");return(0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,["Delete"==r.mode||"Restore"==r.mode?((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:0},["Delete"!=r.mode||r.form.deleted_at?(0,t.createCommentVNode)("",!0):((0,t.openBlock)(),(0,t.createElementBlock)("p",n,[(0,t.createTextVNode)("This version will be trashed for 30 days before it's permanently deleted. Please be certain. Enter the confirmation code "),(0,t.createElementVNode)("span",s,(0,t.toDisplayString)(r.version.confirmation_code),1),(0,t.createTextVNode)(" to confirm this action.")])),"Delete"==r.mode&&r.form.deleted_at?((0,t.openBlock)(),(0,t.createElementBlock)("p",a,[(0,t.createTextVNode)("Once you delete this version, there is no going back. Please be certain. Enter the confirmation code "),(0,t.createElementVNode)("span",l,(0,t.toDisplayString)(r.version.confirmation_code),1),(0,t.createTextVNode)(" to confirm this action.")])):(0,t.createCommentVNode)("",!0),"Restore"==r.mode?((0,t.openBlock)(),(0,t.createElementBlock)("p",i,[(0,t.createTextVNode)("Enter the confirmation code "),(0,t.createElementVNode)("span",c,(0,t.toDisplayString)(r.version.confirmation_code),1),(0,t.createTextVNode)(" to confirm this action.")])):(0,t.createCommentVNode)("",!0),(0,t.createVNode)(B,{modelValue:r.form.confirmation_code,"onUpdate:modelValue":o[0]||(o[0]=function(e){return r.form.confirmation_code=e}),label:"Confirmation code",placeholder:"Enter the confirmation code",disabled:r.form.processing||r.form.processing,error:r.form.errors.confirmation_code,class:"mb-6"},null,8,["modelValue","disabled","error"])],64)):((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:1},[(0,t.createVNode)(B,{modelValue:r.form.number,"onUpdate:modelValue":o[1]||(o[1]=function(e){return r.form.number=e}),label:"Number",placeholder:"1.00",disabled:r.form.processing,error:r.form.errors.number,class:"mb-6"},null,8,["modelValue","disabled","error"]),(0,t.createVNode)(C,{modelValue:r.form.description,"onUpdate:modelValue":o[2]||(o[2]=function(e){return r.form.description=e}),label:"Description",placeholder:"This is the first version",disabled:r.form.processing,error:r.form.errors.description,class:"mb-6"},null,8,["modelValue","disabled","error"])],64)),r.version&&"Update"==r.mode?((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:2},[(0,t.createVNode)(E,{modelValue:r.form.reset_builder,"onUpdate:modelValue":o[3]||(o[3]=function(e){return r.form.reset_builder=e}),label:"Reset",disabled:r.form.processing,error:r.form.errors.reset_builder,class:"mb-6"},{default:(0,t.withCtx)((function(){return[r.form.reset_builder?((0,t.openBlock)(),(0,t.createElementBlock)("span",d," â€” This version will be reset")):(0,t.createCommentVNode)("",!0)]})),_:1},8,["modelValue","disabled","error"]),r.form.reset_builder?((0,t.openBlock)(),(0,t.createElementBlock)("p",m,[(0,t.createTextVNode)("Resetting this version will destroy the version screens, displays, events and settings. Once you reset a version, there is no going back. Enter the reset code "),(0,t.createElementVNode)("span",u,(0,t.toDisplayString)(r.version.confirmation_code),1),(0,t.createTextVNode)(" to confirm this action.")])):(0,t.createCommentVNode)("",!0),r.form.reset_builder?((0,t.openBlock)(),(0,t.createBlock)(B,{key:1,modelValue:r.form.confirmation_code,"onUpdate:modelValue":o[4]||(o[4]=function(e){return r.form.confirmation_code=e}),label:"Reset code",placeholder:"Enter the reset code",disabled:r.form.processing||r.form.processing,error:r.form.errors.confirmation_code,class:"mb-6"},null,8,["modelValue","disabled","error"])):(0,t.createCommentVNode)("",!0)],64)):(0,t.createCommentVNode)("",!0),"Create"==r.mode||"Update"==r.mode?((0,t.openBlock)(),(0,t.createElementBlock)("div",p,[(0,t.createElementVNode)("div",f,[h,(0,t.createVNode)(N,{onClick:o[5]||(o[5]=function(e){return x.addFeature()}),class:"px-3"},{default:(0,t.withCtx)((function(){return[v,g]})),_:1})]),(0,t.createVNode)(_,{group:"features",invertSwap:!0,"item-key":"features",modelValue:r.form.features,"onUpdate:modelValue":o[6]||(o[6]=function(e){return r.form.features=e}),handle:".draggble-handle","ghost-class":"bg-yellow-100"},{default:(0,t.withCtx)((function(){return[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(r.form.features,(function(e,o){return(0,t.openBlock)(),(0,t.createElementBlock)("div",{key:e.id,class:"flex items-center justify-between py-1 px-2 rounded-md -ml-2"},[(0,t.createVNode)(B,{modelValue:r.form.features[o],"onUpdate:modelValue":function(e){return r.form.features[o]=e},placeholder:"Feature #"+(o+1),error:r.form.errors["features."+o],disabled:r.form.processing||r.form.processing,class:"flex-1"},null,8,["modelValue","onUpdate:modelValue","placeholder","error","disabled"]),((0,t.openBlock)(),(0,t.createElementBlock)("svg",{onClick:function(e){return x.removeFeature(o)},xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mt-3 ml-8 hover:text-red-500 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},V,8,k)),w])})),128))]})),_:1},8,["modelValue"]),0==r.form.features.length?((0,t.openBlock)(),(0,t.createBlock)(S,{key:0},{default:(0,t.withCtx)((function(){return[(0,t.createTextVNode)("No features mentioned")]})),_:1})):(0,t.createCommentVNode)("",!0)])):(0,t.createCommentVNode)("",!0),"Create"==r.mode?((0,t.openBlock)(),(0,t.createBlock)(D,{key:4,modelValue:r.form.clone_version_id,"onUpdate:modelValue":o[7]||(o[7]=function(e){return r.form.clone_version_id=e}),options:x.versionOptions,label:"Clone version",placeholder:"Select a version to clone",disabled:r.form.processing,error:r.form.errors.clone_version_id,class:"mt-6"},null,8,["modelValue","options","disabled","error"])):(0,t.createCommentVNode)("",!0)],64)}]])},27316:(e,o,r)=>{r.r(o),r.d(o,{default:()=>w});var t=r(58222),n=(0,t.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,t.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),s={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 cursor-pointer hover:text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},a=[(0,t.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},null,-1)],l=(0,t.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,t.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),i={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 cursor-pointer hover:text-red-500 active:text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},c=[(0,t.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)],d=(0,t.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,t.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),m={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 cursor-pointer hover:text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},u=[(0,t.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)],p=(0,t.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[(0,t.createElementVNode)("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1);var f=r(87879),h=r(37839),v=r(70225),g=r(79152),k=r(48795);const V={components:{useForm:f.cI,CreateOrUpdateVersionForm:h.default,DefaultModal:v.Z,DangerButton:g.Z,PrimaryButton:k.Z},props:{version:{type:Object,default:null},mode:{type:String,default:"Create"},showButton:{type:Boolean,default:!0}},data:function(){return{form:this.getForm()}},methods:{getForm:function(){var e;return this.version&&"Update"==this.mode?(0,f.cI)({description:this.version.description,features:null!==(e=this.version.features)&&void 0!==e?e:[],number:this.version.number,reset_builder:!1,confirmation_code:"",destination:route().current()}):this.version&&["Delete","Restore"].includes(this.mode)?(0,f.cI)({confirmation_code:"",deleted_at:this.version.deleted_at}):"Create"==this.mode?(0,f.cI)({clone_version_id:this.$page.props.versionsPayload.length?this.$page.props.versionsPayload[0].id:null,description:"",features:[],number:""}):(0,f.cI)({})},handleAction:function(e){this.version&&"Update"==this.mode?this.updateVersion(e):this.version&&"Delete"==this.mode?this.deleteVersion(e):this.version&&"Restore"==this.mode?this.restoreVersion(e):"Create"==this.mode&&this.createVersion(e)},createVersion:function(e){var o=this;this.form.clearErrors(),this.form.post(route("versions.create",{project:this.route().params.project,app:this.route().params.app}),{preserveState:!0,preserveScroll:!0,onSuccess:function(){o.$message({message:"Version created successfully",type:"success"}),o.form.reset(),e()},onError:function(e){o.$message({message:"Sorry, we found some mistakes",type:"error"})}})},updateVersion:function(e){var o=this;this.form.clearErrors(),this.form.put(route("version.update",{project:this.route().params.project,app:this.route().params.app,version:this.version.id}),{preserveState:!0,preserveScroll:!0,onSuccess:function(){o.$message({message:"Version updated successfully",type:"success"}),o.form.reset(),e()},onError:function(e){o.$message({message:"Sorry, we found some mistakes",type:"error"})}})},restoreVersion:function(e){var o=this;this.form.clearErrors(),this.form.post(route("version.restore",{project:this.route().params.project,app:this.route().params.app,version:this.version.id}),{preserveScroll:!0,onSuccess:function(){o.$message({message:"Version restored successfully",type:"success"}),o.form.reset(),e()},onError:function(e){o.$message({message:"Sorry, we found some mistakes",type:"error"})}})},deleteVersion:function(e){var o=this;this.form.clearErrors(),this.form.delete(route("version.delete",{project:this.route().params.project,app:this.route().params.app,version:this.version.id}),{preserveState:!0,preserveScroll:!0,onSuccess:function(){o.$message({message:"Version deleted successfully",type:"success"}),o.form.reset(),e()},onError:function(e){o.$message({message:"Sorry, we found some mistakes",type:"error"})}})},cancelCreateVersion:function(){this.form.clearErrors(),this.form.reset()}}};const w=(0,r(83744).Z)(V,[["render",function(e,o,r,f,h,v){var g=(0,t.resolveComponent)("CreateOrUpdateVersionForm"),k=(0,t.resolveComponent)("PrimaryButton"),V=(0,t.resolveComponent)("DangerButton"),w=(0,t.resolveComponent)("DefaultModal");return(0,t.openBlock)(),(0,t.createBlock)(w,{defaultText:"Cancel",onOpen:o[0]||(o[0]=function(o){e.isOpen=!0,e.$emit("open")}),onClose:o[1]||(o[1]=function(o){e.isOpen=!1,e.$emit("close")}),defaultAction:v.cancelCreateVersion,isLoading:h.form.processing,dangerText:["Delete"].includes(this.mode)?r.mode+" Version":"",dangerAction:v.handleAction,primaryText:["Create","Update","Restore"].includes(r.mode)?["Create","Restore"].includes(this.mode)?r.mode+" Version":"Save Changes":"",primaryAction:v.handleAction},{title:(0,t.withCtx)((function(){return[(0,t.createTextVNode)((0,t.toDisplayString)(r.mode)+" Version",1)]})),trigger:(0,t.withCtx)((function(){return["Update"==r.mode?((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:0},[r.showButton?((0,t.openBlock)(),(0,t.createBlock)(k,{key:0,disabled:h.form.processing,name:"trigger"},{default:(0,t.withCtx)((function(){return[n,(0,t.createTextVNode)(" Edit ")]})),_:1},8,["disabled"])):((0,t.openBlock)(),(0,t.createElementBlock)("svg",s,a))],64)):"Delete"==r.mode?((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:1},[r.showButton?((0,t.openBlock)(),(0,t.createBlock)(V,{key:0,disabled:h.form.processing,name:"trigger"},{default:(0,t.withCtx)((function(){return[l,(0,t.createTextVNode)(" "+(0,t.toDisplayString)(r.version.deleted_at?r.mode:"Trash"),1)]})),_:1},8,["disabled"])):((0,t.openBlock)(),(0,t.createElementBlock)("svg",i,c))],64)):"Restore"==r.mode?((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:2},[r.showButton?((0,t.openBlock)(),(0,t.createBlock)(k,{key:0,disabled:h.form.processing,name:"trigger"},{default:(0,t.withCtx)((function(){return[d,(0,t.createTextVNode)(" Restore ")]})),_:1},8,["disabled"])):((0,t.openBlock)(),(0,t.createElementBlock)("svg",m,u))],64)):((0,t.openBlock)(),(0,t.createBlock)(k,{key:3,disabled:h.form.processing,name:"trigger"},{default:(0,t.withCtx)((function(){return[p,(0,t.createTextVNode)(" "+(0,t.toDisplayString)(r.mode)+" Version ",1)]})),_:1},8,["disabled"]))]})),default:(0,t.withCtx)((function(){return[(0,t.createVNode)(g,{form:h.form,version:r.version,mode:r.mode},null,8,["form","version","mode"])]})),_:1},8,["defaultAction","isLoading","dangerText","dangerAction","primaryText","primaryAction"])}]])}}]);