"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2286,6816,3151,8903,53],{93584:(e,t,o)=>{o.d(t,{Z:()=>a});var r=o(58222),n={class:"w-full bg-gray-200 rounded-full"};const s={props:{width:{type:Number,default:0}}};const a=(0,o(83744).Z)(s,[["render",function(e,t,o,s,a,l){return(0,r.openBlock)(),(0,r.createElementBlock)("div",n,[(0,r.createElementVNode)("div",{class:"bg-blue-600 text-xs font-medium text-blue-100 text-center p-0.5 leading-none rounded-full",style:(0,r.normalizeStyle)({width:o.width+"%"})},(0,r.toDisplayString)(o.width)+"%",5)])}]])},46816:(e,t,o)=>{o.r(t),o.d(t,{default:()=>a});var r=o(58222),n=(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})],-1);const s={props:["disabled"],components:{DefaultButton:o(52241).Z},methods:{showApp:function(){this.$inertia.get(route("app.show.with.versions",{project:this.route().params.project,app:this.route().params.app}))}}};const a=(0,o(83744).Z)(s,[["render",function(e,t,o,s,a,l){var i=(0,r.resolveComponent)("DefaultButton");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createVNode)(i,{onClick:t[0]||(t[0]=function(e){return l.showApp()}),disabled:o.disabled},{default:(0,r.withCtx)((function(){return[n,(0,r.renderSlot)(e.$slots,"default",{},(function(){return[(0,r.createTextVNode)("Back")]}))]})),_:3},8,["disabled"])])}]])},23151:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var r=o(58222),n=(0,r.createElementVNode)("span",{class:"block text-justify"},[(0,r.createTextVNode)(" Exporting your "),(0,r.createElementVNode)("span",{class:"font-semibold text-blue-500"},"Project File"),(0,r.createTextVNode)(" will download a JSON File that can be imported into a different project ")],-1),s=(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[(0,r.createElementVNode)("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1);var a=o(90770),l=o(70225),i=o(91098),c=o(52241);const d={props:["form"],components:{PrimaryAlert:a.Z,DefaultModal:l.Z,DefaultButton:c.Z},data:function(){return{useVersionBuilder:(0,i.P)(),project:this.$page.props.projectPayload,version:this.$page.props.versionPayload,app:this.$page.props.appPayload}},methods:{exportFile:function(e){var t=this.app.name+" - version "+this.version.number,o=this.useVersionBuilder.builder,r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(o)),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",t+".json"),document.body.appendChild(n),n.click(),n.remove(),this.$message({message:"Exporting your project file",type:"success"}),e()}}};const u=(0,o(83744).Z)(d,[["render",function(e,t,o,a,l,i){var c=(0,r.resolveComponent)("PrimaryAlert"),d=(0,r.resolveComponent)("DefaultButton"),u=(0,r.resolveComponent)("DefaultModal");return(0,r.openBlock)(),(0,r.createBlock)(u,{defaultText:"Cancel",primaryAction:i.exportFile,primaryText:o.form.processing?"":"Export File"},{title:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Export Version")]})),trigger:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{class:"rounded-l-none"},{default:(0,r.withCtx)((function(){return[s,(0,r.createTextVNode)(" Export ")]})),_:1})]})),default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,null,{default:(0,r.withCtx)((function(){return[n]})),_:1})]})),_:1},8,["primaryAction","primaryText"])}]])},98903:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Z});var r=o(58222),n=(0,r.createElementVNode)("span",{class:"block text-justify"},[(0,r.createTextVNode)(" Select a previously exported "),(0,r.createElementVNode)("span",{class:"font-semibold text-blue-500"},"Project File"),(0,r.createTextVNode)(" to begin importing the project. Note that this import process will replace your current version's screens, displays, events, settings e.t.c. After you import any Project File you must "),(0,r.createElementVNode)("span",{class:"font-semibold text-green-500"},"Save Changes"),(0,r.createTextVNode)(" to finalize the process. This will permanently update the changes. If the JSON file imported is very large, it may take some time to save changes. ")],-1),s=(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1),a=(0,r.createElementVNode)("span",{class:"text-xs text-gray-400"},"Select the exported JSON File",-1),l={key:0,class:"flex justify-between border rounded-md p-2 mt-2"},i={class:"flex"},c=(0,r.createElementVNode)("div",{class:"mr-2"},[(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"text-blue-400 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),d={class:"text-gray-700 mb-1"},u={class:"text-gray-500 text-xs"},p=(0,r.createElementVNode)("span",{class:"text-gray-300 italic"}," â€” application/json",-1),m=[(0,r.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)],h={key:1},f=(0,r.createElementVNode)("h1",{class:"text-gray-700 text-xs font-semibold my-4"},"Properties To Import",-1),g={class:"grid grid-cols-2 bg-blue-50 p-4 rounded-md"},v=["id","onUpdate:modelValue"],w=["for"],x={class:"grid grid-cols-12 gap-8 justify-center mb-4"},V={class:"col-span-8"},y={class:"col-span-4 flex items-center justify-end"},k=[(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),(0,r.createElementVNode)("span",null,"Cancel",-1)],B=(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[(0,r.createElementVNode)("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1),C=(0,r.createElementVNode)("span",null,"Import",-1);var N=o(24788),b=o(90770),E=o(70225),P=o(91098),S=o(52241),j=o(48795),D=o(93584);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function M(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function I(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?M(Object(o),!0).forEach((function(t){O(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):M(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function O(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const F={props:["form"],components:{DefaultError:N.Z,PrimaryAlert:b.Z,DefaultModal:E.Z,DefaultButton:S.Z,PrimaryButton:j.Z,DefaultProgressBar:D.Z},data:function(){return{file:null,error:null,fileList:[],builder:null,request:null,properties:[],isLoading:!1,uploadMessage:null,progressPercentage:null,uploadProgressPercentage:null,downloadProgressPercentage:null,useVersionBuilder:(0,P.P)()}},methods:{beforeUpload:function(e){this.reset();var t=e.raw;if("application/json"==t.type){this.file=t;var o=new FileReader;o.onload=function(e){try{var t=JSON.parse(e.target.result),o=Object.keys(t);o.includes("screens")&&o.includes("simulator")?(this.builder=t,this.properties=o.map((function(e){return{label:e.split("_").join(" "),value:e,checked:!0}}))):this.setImportError("The file imported is not a valid Builder File")}catch(e){this.reset(),this.setImportError("Failed to process the file")}}.bind(this),this.file&&o.readAsText(this.file)}else this.setImportError("The file imported is not a valid JSON File")},reset:function(){this.file=null,this.fileList=[],this.builder=null,this.properties=[],this.unsetImportError()},setImportError:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.error=t,setTimeout((function(){e.unsetImportError()}),3e3)},unsetImportError:function(){this.error=""},getFileSize:function(e){var t=1024,o=1048576;return(e=parseInt(e))>=o?e=Math.round(e/o*100)/100+" MB":e>=t&&(e=Math.round(e/t*100)/100+" KB"),e},importFile:function(e){if(this.builder){for(var t=this.properties.map((function(e){return e.value})),o=this.properties.filter((function(e){return 0==e.checked})).map((function(e){return e.value})),r=0;r<t.length;r++){var n=t[r];o.includes(n)&&delete this.builder[n]}var s=I(I({},this.useVersionBuilder.builder),this.builder);this.uploadToRepairFile(s,e)}else this.setImportError("Select a JSON File to upload")},uploadToRepairFile:function(e,t){var o=this;this.isLoading=!0,console.log("builderForRepair"),console.log(e);var n=new FormData;n.append("builder",JSON.stringify(e));var s=route("version.repair",{project:this.route().params.project,app:this.route().params.app,version:this.route().params.version}),a=axios.CancelToken.source();this.request={cancel:a.cancel};var l={onUploadProgress:function(e){o.uploadMessage="Uploading file for repair analysis",o.uploadProgressPercentage=Math.round(100*e.loaded/e.total),o.calculateProgress()},onDownloadProgress:function(e){o.uploadMessage="Downloading repaired file",o.downloadProgressPercentage=Math.round(100*e.loaded/e.total),o.calculateProgress()},cancelToken:a.token},i=this;axios.post(s,n,l).then((function(e){var n=e.data;i.useVersionBuilder.setBuilder(n),o.useVersionBuilder.selectRecomendedScreen(),o.useVersionBuilder.hasImportedBuilder=!0,i.$message({type:"success",message:(0,r.h)("p",null,[(0,r.h)("span",null,"Import successful"),(0,r.h)("div",{class:"text-xs mt-2"},"The builder was imported successfully."),(0,r.h)("div",{class:"text-xs mt-2"},'Click "Save Changes" to permanently save these updates. Refresh the page to undo the import.')]),duration:8e3}),t()})).catch((function(e){var t,r=null!==(t=(e||{}).message)&&void 0!==t?t:"Sorry, something went wrong";419===e.response.status&&(r="Please login",o.$inertia.get(route("login.show"))),i.$message({message:r,type:"warning"})})).finally((function(){o.resetRequest()}))},calculateProgress:function(){var e=(this.uploadProgressPercentage||0)+(this.downloadProgressPercentage||0);this.progressPercentage=Math.round(100*e/200)},cancelRequest:function(){this.request&&this.request.cancel("File repair cancelled"),this.resetRequest()},resetRequest:function(){this.request=null,this.isLoading=!1,this.uploadMessage=null,this.progressPercentage=null,this.uploadProgressPercentage=null,this.downloadProgressPercentage=null}}};const Z=(0,o(83744).Z)(F,[["render",function(e,t,o,N,b,E){var P=(0,r.resolveComponent)("PrimaryAlert"),S=(0,r.resolveComponent)("DefaultButton"),j=(0,r.resolveComponent)("el-upload"),D=(0,r.resolveComponent)("DefaultProgressBar"),T=(0,r.resolveComponent)("DefaultError"),M=(0,r.resolveComponent)("DefaultModal");return(0,r.openBlock)(),(0,r.createBlock)(M,{onOpen:t[2]||(t[2]=function(e){return E.reset()}),defaultText:"Cancel",primaryAction:E.importFile,primaryText:o.form.processing?"":"Import"},{title:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Import Version")]})),trigger:(0,r.withCtx)((function(){return[(0,r.createVNode)(S,{class:"rounded-r-none"},{default:(0,r.withCtx)((function(){return[B,C]})),_:1})]})),default:(0,r.withCtx)((function(){return[(0,r.createVNode)(P,{class:"mb-4"},{default:(0,r.withCtx)((function(){return[n]})),_:1}),null==b.progressPercentage?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createVNode)(j,{action:"/",multiple:!1,"auto-upload":!1,"file-list":b.fileList,"on-change":E.beforeUpload},(0,r.createSlots)({default:(0,r.withCtx)((function(){return[(0,r.createVNode)(S,{class:"px-3 mr-2"},{default:(0,r.withCtx)((function(){return[s,(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(b.file?"Replace":"Select")+" File",1)]})),_:1})]})),_:2},[b.file?void 0:{name:"tip",fn:(0,r.withCtx)((function(){return[a]})),key:"0"}]),1032,["file-list","on-change"]),b.file?((0,r.openBlock)(),(0,r.createElementBlock)("div",l,[(0,r.createElementVNode)("div",i,[c,(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("p",d,(0,r.toDisplayString)(b.file.name),1),(0,r.createElementVNode)("span",u,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(E.getFileSize(b.file.size)),1),p])])]),((0,r.openBlock)(),(0,r.createElementBlock)("svg",{onClick:t[0]||(t[0]=function(e){return E.reset()}),xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 cursor-pointer text-gray-400 hover:text-red-500 active:text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},m))])):(0,r.createCommentVNode)("",!0),b.file?((0,r.openBlock)(),(0,r.createElementBlock)("div",h,[f,(0,r.createElementVNode)("div",g,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(b.properties,(function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:"col-span-1"},[(0,r.withDirectives)((0,r.createElementVNode)("input",{id:"property-checkbox-"+t,type:"checkbox","onUpdate:modelValue":function(t){return e.checked=t},class:"w-4 h-4 mr-2 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,8,v),[[r.vModelCheckbox,e.checked]]),(0,r.createElementVNode)("label",{for:"property-checkbox-"+t},(0,r.toDisplayString)(e.label),9,w)])})),128))])])):(0,r.createCommentVNode)("",!0)],64)):((0,r.openBlock)(),(0,r.createBlock)(r.Transition,{key:1,name:"slide-up"},{default:(0,r.withCtx)((function(){return[(0,r.createElementVNode)("div",x,[(0,r.createElementVNode)("div",V,[(0,r.createVNode)(D,{width:b.progressPercentage},null,8,["width"])]),(0,r.createElementVNode)("div",y,[(0,r.createElementVNode)("span",{onClick:t[1]||(t[1]=function(e){return E.cancelRequest()}),class:"flex items-center text-xs text-red-500 hover:text-red-600 active:text-red-700 cursor-pointer ml-8"},k)])])]})),_:1})),b.error?((0,r.openBlock)(),(0,r.createBlock)(T,{key:2,error:b.error,class:"mt-2"},null,8,["error"])):(0,r.createCommentVNode)("",!0)]})),_:1},8,["primaryAction","primaryText"])}]])},53:(e,t,o)=>{o.r(t),o.d(t,{default:()=>p});var r=o(58222),n={class:"block text-justify"},s={class:"font-semibold text-blue-500"},a=(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[(0,r.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m15 15-6 6m0 0-6-6m6 6V9a6 6 0 0 1 12 0v3"})],-1);var l=o(90770),i=o(70225),c=o(91098),d=o(80393);const u={props:["form"],components:{PrimaryAlert:l.Z,DefaultModal:i.Z,WarningButton:d.Z},data:function(){return{useVersionBuilder:(0,c.P)(),project:this.$page.props.projectPayload,version:this.$page.props.versionPayload,app:this.$page.props.appPayload}},computed:{name:function(){return this.app.name+" - version "+this.version.number}},methods:{undoChanges:function(e){this.useVersionBuilder.setOriginalBuilder(),this.$message({message:"Changes reversed",type:"success"}),e()}}};const p=(0,o(83744).Z)(u,[["render",function(e,t,o,l,i,c){var d=(0,r.resolveComponent)("PrimaryAlert"),u=(0,r.resolveComponent)("WarningButton"),p=(0,r.resolveComponent)("DefaultModal");return(0,r.openBlock)(),(0,r.createBlock)(p,{defaultText:"Cancel",warningAction:c.undoChanges,warningText:o.form.processing?"":"Undo Changes"},{title:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Undo Changes")]})),trigger:(0,r.withCtx)((function(){return[(0,r.createVNode)(u,null,{default:(0,r.withCtx)((function(){return[a,(0,r.createTextVNode)(" Undo Changes ")]})),_:1})]})),default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,null,{default:(0,r.withCtx)((function(){return[(0,r.createElementVNode)("span",n,[(0,r.createTextVNode)(" We have detected some changes that have not yet been saved for "),(0,r.createElementVNode)("span",s,(0,r.toDisplayString)(c.name),1),(0,r.createTextVNode)(". If you would like to revert back to the previous state, then you may undo these unsaved changes. Please note that this action cannot be undone and all unsaved changes will be lost once completed. ")])]})),_:1})]})),_:1},8,["warningAction","warningText"])}]])},42286:(e,t,o)=>{o.r(t),o.d(t,{default:()=>M});var r=o(58222),n=(0,r.createElementVNode)("span",null,[(0,r.createTextVNode)(" This builder has not been saved. Please "),(0,r.createElementVNode)("span",{class:"font-semibold text-blue-500"},"Save Changes"),(0,r.createTextVNode)(" so that the simulator can reflect the imported changes. Then again you could refresh the browser to omit the imported changes. ")],-1),s={class:"flex justify-between mb-4"},a=(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1),l=(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),i={class:"flex"},c={key:0,class:"flex items-center mr-8"},d={class:"flex items-center space-x-2"},u={key:0},p={key:0,class:"grid grid-cols-12 gap-8 justify-center mb-4"},m={class:"col-span-8"},h={class:"col-span-4 flex items-center justify-between"},f=[(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),(0,r.createElementVNode)("span",null,"Cancel",-1)],g={key:0,class:"grid grid-cols-12 gap-8 justify-center mb-4"},v={class:"col-span-9"},w={class:"col-span-3 flex items-center justify-end"};var x=o(6154),V=o(46816),y=o(87879),k=o(24788),B=o(36856),C=o(56861),N=o(91098),b=o(52241),E=o(48795),P=o(53),S=o(98903),j=o(23151),D=o(93584);const T={props:{showEditor:Boolean},components:{BackButton:V.default,DefaultError:k.Z,WarningAlert:B.Z,WarningBadge:C.Z,DefaultButton:b.Z,PrimaryButton:E.Z,UndoChangesModal:P.default,ImportVersionModal:S.default,ExportVersionModal:j.default,DefaultProgressBar:D.Z},data:function(){return{useVersionBuilder:(0,N.P)(),project:this.$page.props.projectPayload,version:this.$page.props.versionPayload,app:this.$page.props.appPayload,downloadInSecondsInterval:null,stillLoadingConversation:null,progressPercentage:null,downloadInSeconds:0,isDownloading:!1,startingConvo:null,form:(0,y.cI)({}),isSaving:!1,request:null}},watch:{"useVersionBuilder.builder":{handler:function(e,t){_.isEmpty(t)||this.useVersionBuilder.setUnsavedBuilderOnLocalStorage(e)},deep:!0}},computed:{error:function(){return this.form.errors.number||this.form.errors.description||this.form.errors.builder||this.form.errors.reset_builder||this.form.errors.confirmation_code}},methods:{getStillLoadingConversations:function(){return[this.isSaving?"Saving changes ...":"Downloading app...","ðŸ™‚ Take a break for now","ðŸ•‘ This may take some time","â˜• Did you have a cup of coffee?","ðŸ¥‡ Big projects take time to "+(this.isSaving?"save":"download"),"ðŸ˜Ž Just be patient in the meantime","ðŸ‘Œ This is all part of the process","ðŸ¥ª Did you get something to eat?","ðŸš¶ This is a good time to relax","ðŸ‘Š Still saving, don't worry","ðŸ‘Š Still "+(this.isSaving?"saving":"downloading")+", don't worry","ðŸ‘€ I know, just one moment please","ðŸ¥‚C We are almost there"]},startConvo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=this.getStillLoadingConversations();this.stillLoadingConversation=o[t];var r=t==o.length-1?0:t+1;this.startingConvo=setTimeout((function(){return e.startConvo(r)}),1e4)},stopConvo:function(){clearInterval(this.startingConvo)},updateVersion:function(){var e=this;this.useVersionBuilder.hasSavedBuilder=!1,this.isSaving=!0,this.startConvo();var t=new FormData;t.append("_method","put"),t.append("builder",JSON.stringify(this.useVersionBuilder.builder));var o=route("version.update",{project:this.route().params.project,app:this.route().params.app,version:this.route().params.version}),r=x.Z.CancelToken.source();this.request={cancel:r.cancel};var n={onUploadProgress:function(t){e.progressPercentage=Math.round(100*t.loaded/t.total)},cancelToken:r.token},s=this;x.Z.post(o,t,n).then((function(t){s.$message({message:"Changes saved successfully",type:"success"}),e.useVersionBuilder.removeUnsavedBuilderFromLocalStorage(),e.useVersionBuilder.hasImportedBuilder=!1})).catch((function(t){var o,r=null!==(o=(t||{}).message)&&void 0!==o?o:"Sorry, something went wrong";419===t.response.status&&(r="Please login",e.$inertia.get(route("login.show"))),s.$message({message:r,type:"warning"})})).finally((function(){e.resetRequest()}))},downloadVersion:function(){var e=this;this.isDownloading=!0,this.startConvo();var t=route("version.show",{project:this.route().params.project,app:this.route().params.app,version:this.route().params.version}),o={onDownloadProgress:function(t){e.progressPercentage=Math.round(100*t.loaded/t.total)}};this.downloadInSecondsInterval=setInterval((function(){++e.downloadInSeconds}),1e3);var r=this;x.Z.get(t,o).then((function(t){r.downloadInSeconds>=5&&r.$message({message:"Download successful",type:"success"});var o=t.data;e.useVersionBuilder.setBuilder(o),e.useVersionBuilder.selectRecomendedScreen()})).catch((function(e){var t;r.$message({message:null!==(t=(e||{}).message)&&void 0!==t?t:"Sorry, something went wrong",type:"warning"})})).finally((function(){e.resetRequest()}))},cancelRequest:function(){this.request&&this.request.cancel("Saving cancelled"),this.useVersionBuilder.selectRecomendedScreen(),this.resetRequest()},resetRequest:function(){this.stopConvo(),this.request=null,this.isSaving=!1,this.isDownloading=!1,this.downloadInSeconds=0,this.progressPercentage=null,clearInterval(this.downloadInSecondsInterval),this.useVersionBuilder.hasSavedBuilder=!0,this.useVersionBuilder.hasDownloadedBuilder=!0}},unmounted:function(){this.stopConvo()},created:function(){this.useVersionBuilder.project=this.project,this.useVersionBuilder.version=this.version,this.useVersionBuilder.app=this.app,this.downloadVersion()}};const M=(0,o(83744).Z)(T,[["render",function(e,t,o,x,V,y){var k=(0,r.resolveComponent)("WarningAlert"),B=(0,r.resolveComponent)("BackButton"),C=(0,r.resolveComponent)("ImportVersionModal"),N=(0,r.resolveComponent)("ExportVersionModal"),b=(0,r.resolveComponent)("UndoChangesModal"),E=(0,r.resolveComponent)("PrimaryButton"),P=(0,r.resolveComponent)("DefaultProgressBar"),S=(0,r.resolveComponent)("DefaultError");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[V.useVersionBuilder.hasImportedBuilder||V.useVersionBuilder.hasUnsavedBuilderFromLocalStorage?((0,r.openBlock)(),(0,r.createBlock)(k,{key:0,class:"w-1/2 mb-6"},{default:(0,r.withCtx)((function(){return[n]})),_:1})):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",s,[(0,r.createVNode)(B,{disabled:V.isSaving||V.isDownloading},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Versions")]})),_:1},8,["disabled"]),(0,r.createElementVNode)("div",null,[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(1==o.showEditor?"PrimaryButton":"DefaultButton"),{class:"rounded-r-none px-8",disabled:V.isSaving||V.isDownloading,onClick:t[0]||(t[0]=function(t){return e.$emit("showEditorState",!0)})},{default:(0,r.withCtx)((function(){return[a,(0,r.createTextVNode)(" Editor ")]})),_:1},8,["disabled"])),((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(0==o.showEditor?"PrimaryButton":"DefaultButton"),{class:"rounded-l-none px-8",disabled:V.isSaving||V.isDownloading,onClick:t[1]||(t[1]=function(t){return e.$emit("showEditorState",!1)})},{default:(0,r.withCtx)((function(){return[l,(0,r.createTextVNode)(" Simulator ")]})),_:1},8,["disabled"]))]),(0,r.createElementVNode)("div",i,[(0,r.createVNode)(r.Transition,{name:"fade"},{default:(0,r.withCtx)((function(){return[V.isSaving||V.isDownloading?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",c,[(0,r.createVNode)(C,{form:V.form},null,8,["form"]),(0,r.createVNode)(N,{form:V.form},null,8,["form"])]))]})),_:1}),(0,r.createElementVNode)("div",d,[V.useVersionBuilder.hasUnsavedBuilderFromLocalStorage?((0,r.openBlock)(),(0,r.createElementBlock)("div",u,[(0,r.createVNode)(b,{form:V.form},null,8,["form"])])):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(E,{disabled:V.isSaving||V.isDownloading,onClick:t[2]||(t[2]=function(e){return y.updateVersion()})},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Save Changes")]})),_:1},8,["disabled"])])])]),(0,r.createVNode)(r.Transition,{name:"fade"},{default:(0,r.withCtx)((function(){return[1==V.isSaving&&null!==V.progressPercentage?((0,r.openBlock)(),(0,r.createElementBlock)("div",p,[(0,r.createElementVNode)("div",m,[(0,r.createVNode)(P,{width:V.progressPercentage},null,8,["width"])]),(0,r.createElementVNode)("div",h,[(0,r.createVNode)(r.Transition,{name:"fade",mode:"out-in",appear:""},{default:(0,r.withCtx)((function(){return[V.stillLoadingConversation?((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:V.stillLoadingConversation,class:"text-gray-400 text-xs"},[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(V.stillLoadingConversation),1)])):(0,r.createCommentVNode)("",!0)]})),_:1}),(0,r.createElementVNode)("span",{onClick:t[3]||(t[3]=function(e){return y.cancelRequest()}),class:"flex items-center text-xs text-red-500 hover:text-red-600 active:text-red-700 cursor-pointer ml-8"},f)])])):(0,r.createCommentVNode)("",!0)]})),_:1}),(0,r.createVNode)(r.Transition,{name:"slide-up"},{default:(0,r.withCtx)((function(){return[1==V.isDownloading&&V.downloadInSeconds>=1?((0,r.openBlock)(),(0,r.createElementBlock)("div",g,[(0,r.createElementVNode)("div",v,[(0,r.createVNode)(P,{width:V.progressPercentage},null,8,["width"])]),(0,r.createElementVNode)("div",w,[(0,r.createVNode)(r.Transition,{name:"slide-up",mode:"out-in",appear:""},{default:(0,r.withCtx)((function(){return[V.stillLoadingConversation?((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:V.stillLoadingConversation,class:"text-gray-400 text-xs"},[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(V.stillLoadingConversation),1)])):(0,r.createCommentVNode)("",!0)]})),_:1})])])):(0,r.createCommentVNode)("",!0)]})),_:1}),(0,r.createVNode)(S,{error:y.error,class:"my-4"},null,8,["error"])])}]])}}]);